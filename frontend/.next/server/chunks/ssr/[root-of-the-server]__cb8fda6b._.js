module.exports=[5648,(a,b,c)=>{"use strict";b.exports=a.r(32266).vendored.contexts.HooksClientContext},78636,(a,b,c)=>{"use strict";b.exports=a.r(32266).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},90680,(a,b,c)=>{"use strict";b.exports=a.r(32266).vendored.contexts.AppRouterContext},66719,(a,b,c)=>{"use strict";b.exports=a.r(32266).vendored["react-ssr"].ReactServerDOMTurbopackClient},51116,a=>{"use strict";let b=(0,a.i(36742).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],51116)},11634,a=>{"use strict";let b=(0,a.i(36742).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],11634)},56406,a=>{"use strict";var b=a.i(56718),c=a.i(67416),d=a.i(82823),e=a.i(40771),f=a.i(57158),g=a.i(95736),h=a.i(51116),i=a.i(11634);let j=(0,a.i(36742).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function k(){let{user:a,isAuthenticated:k,loading:l}=(0,e.useAuth)(),m=(0,d.useRouter)(),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)("");(0,c.useEffect)(()=>{l||k&&a?.role==="admin"?k&&a?.role==="admin"&&t():m.push("/products")},[k,l,a]);let t=async()=>{try{let a=await f.default.get("/users/admin/all");if(a.data.success){let b=a.data.users;r&&(b=b.filter(a=>a.name.toLowerCase().includes(r.toLowerCase())||a.email.toLowerCase().includes(r.toLowerCase()))),o(b)}}catch(a){a.response?.status===404&&console.log("Users endpoint not yet created"),console.error("Error fetching users:",a)}finally{q(!1)}},u=async a=>{if(confirm("Make this user an admin?"))try{await f.default.put(`/users/${a}/role`,{role:"admin"}),t(),alert("User role updated successfully!")}catch(a){alert(a.response?.data?.message||"Failed to update user role")}},v=async a=>{if(confirm("Remove admin privileges from this user?"))try{await f.default.put(`/users/${a}/role`,{role:"customer"}),t(),alert("User role updated successfully!")}catch(a){alert(a.response?.data?.message||"Failed to update user role")}};return l||p?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-20 text-center",children:"Loading..."})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(g.default,{}),(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Manage Users"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"View and manage customer accounts"})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:a=>s(a.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Joined"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===n.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:[(0,b.jsx)(h.Users,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,b.jsx)("p",{children:"No users found"})]})}):n.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-600",children:a.email}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 text-xs rounded-full font-semibold ${"admin"===a.role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:"admin"===a.role?(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(j,{size:14})," Admin"]}):"Customer"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4",children:"admin"===a.role?(0,b.jsx)("button",{onClick:()=>v(a._id),className:"text-sm px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Remove Admin"}):(0,b.jsx)("button",{onClick:()=>u(a._id),className:"text-sm px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Make Admin"})})]},a._id))})]})})})]})]})}a.s(["default",()=>k],56406)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cb8fda6b._.js.map