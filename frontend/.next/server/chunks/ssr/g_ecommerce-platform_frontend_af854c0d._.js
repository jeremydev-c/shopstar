module.exports=[18911,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},86224,(a,b,c)=>{"use strict";var d=a.r(18911);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},32603,(a,b,c)=>{b.exports=a.r(86224)()},20872,a=>{"use strict";var b,c=a.i(56718),d=a.i(67416),e=a.i(82823),f=a.i(40771),g="clover";"".concat("https://js.stripe.com","/").concat(g,"/stripe.js");var h=function(a,b){a&&a._registerWrapper&&a._registerWrapper({name:"stripe-js",version:"8.2.0",startTime:b})},i=null,j=function(a,b,c){if(null===a)return null;var d,e=b[0].match(/^pk_test/),f=3===(d=a.version)?"v3":d;e&&f!==g&&console.warn("Stripe.js@".concat(f," was loaded on the page, but @stripe/stripe-js@").concat("8.2.0"," expected Stripe.js@").concat(g,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=a.apply(void 0,b);return h(i,c),i},k=!1,l=function(){return b?b:b=(null!==i?i:(i=new Promise(function(a,b){a(null)})).catch(function(a){return i=null,Promise.reject(a)})).catch(function(a){return b=null,Promise.reject(a)})};Promise.resolve().then(function(){return l()}).catch(function(a){k||console.warn(a)});var m=a.i(32603);function n(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function o(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?n(Object(c),!0).forEach(function(b){q(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function p(a){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function q(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function r(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c,d,e=a&&("undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"]);if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(a){h=!0,d=a}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(a,b)||function(a,b){if(a){if("string"==typeof a)return s(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return s(a,b)}}(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var t=function(a,b,c){var e=!!c,f=d.default.useRef(c);d.default.useEffect(function(){f.current=c},[c]),d.default.useEffect(function(){if(!e||!a)return function(){};var c=function(){f.current&&f.current.apply(f,arguments)};return a.on(b,c),function(){a.off(b,c)}},[e,b,a,f])},u=function(a){var b=d.default.useRef(a);return d.default.useEffect(function(){b.current=a},[a]),b.current},v=function(a){return null!==a&&"object"===p(a)},w="[object Object]",x=function a(b,c){if(!v(b)||!v(c))return b===c;var d=Array.isArray(b);if(d!==Array.isArray(c))return!1;var e=Object.prototype.toString.call(b)===w;if(e!==(Object.prototype.toString.call(c)===w))return!1;if(!e&&!d)return b===c;var f=Object.keys(b),g=Object.keys(c);if(f.length!==g.length)return!1;for(var h={},i=0;i<f.length;i+=1)h[f[i]]=!0;for(var j=0;j<g.length;j+=1)h[g[j]]=!0;var k=Object.keys(h);return k.length===f.length&&k.every(function(d){return a(b[d],c[d])})},y=function(a,b,c){return v(a)?Object.keys(a).reduce(function(d,e){var f=!v(b)||!x(a[e],b[e]);return c.includes(e)?(f&&console.warn("Unsupported prop change: options.".concat(e," is not a mutable property.")),d):f?o(o({},d||{}),{},q({},e,a[e])):d},null):null},z="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",A=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;if(null===a||v(a)&&"function"==typeof a.elements&&"function"==typeof a.createToken&&"function"==typeof a.createPaymentMethod&&"function"==typeof a.confirmCardPayment)return a;throw Error(b)},B=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;if(v(a)&&"function"==typeof a.then)return{tag:"async",stripePromise:Promise.resolve(a).then(function(a){return A(a,b)})};var c=A(a,b);return null===c?{tag:"empty"}:{tag:"sync",stripe:c}},C=function(a){a&&a._registerWrapper&&a.registerAppInfo&&(a._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),a.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},D=d.default.createContext(null);D.displayName="ElementsContext";var E=function(a,b){if(!a)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(b," in an <Elements> provider."));return a},F=function(a){var b=a.stripe,c=a.options,e=a.children,f=d.default.useMemo(function(){return B(b)},[b]),g=r(d.default.useState(function(){return{stripe:"sync"===f.tag?f.stripe:null,elements:"sync"===f.tag?f.stripe.elements(c):null}}),2),h=g[0],i=g[1];d.default.useEffect(function(){var a=!0,b=function(a){i(function(b){return b.stripe?b:{stripe:a,elements:a.elements(c)}})};return"async"!==f.tag||h.stripe?"sync"!==f.tag||h.stripe||b(f.stripe):f.stripePromise.then(function(c){c&&a&&b(c)}),function(){a=!1}},[f,h,c]);var j=u(b);d.default.useEffect(function(){null!==j&&j!==b&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[j,b]);var k=u(c);return d.default.useEffect(function(){if(h.elements){var a=y(c,k,["clientSecret","fonts"]);a&&h.elements.update(a)}},[c,k,h.elements]),d.default.useEffect(function(){C(h.stripe)},[h.stripe]),d.default.createElement(D.Provider,{value:h},e)};F.propTypes={stripe:m.default.any,options:m.default.object};m.default.func.isRequired;var G=d.default.createContext(null);G.displayName="CheckoutContext",m.default.any,m.default.shape({clientSecret:m.default.oneOfType([m.default.string,m.default.instanceOf(Promise)]).isRequired,elementsOptions:m.default.object}).isRequired;var H=function(a){var b=d.default.useContext(G),c=d.default.useContext(D);if(!b)return E(c,a);if(!c)return b;throw Error("You cannot wrap the part of your app that ".concat(a," in both <CheckoutProvider> and <Elements> providers."))},I=["mode"],J=function(a,b){var c="".concat(a.charAt(0).toUpperCase()+a.slice(1),"Element"),e=b?function(a){H("mounts <".concat(c,">"));var b=a.id,e=a.className;return d.default.createElement("div",{id:b,className:e})}:function(b){var e,f=b.id,g=b.className,h=b.options,i=void 0===h?{}:h,j=b.onBlur,k=b.onFocus,l=b.onReady,m=b.onChange,n=b.onEscape,o=b.onClick,p=b.onLoadError,q=b.onLoaderStart,s=b.onNetworksChange,v=b.onConfirm,w=b.onCancel,x=b.onShippingAddressChange,z=b.onShippingRateChange,A=b.onSavedPaymentMethodRemove,B=b.onSavedPaymentMethodUpdate,C=H("mounts <".concat(c,">")),D="elements"in C?C.elements:null,E="checkoutState"in C?C.checkoutState:null,F=(null==E?void 0:E.type)==="success"||(null==E?void 0:E.type)==="loading"?E.sdk:null,G=r(d.default.useState(null),2),J=G[0],K=G[1],L=d.default.useRef(null),M=d.default.useRef(null);t(J,"blur",j),t(J,"focus",k),t(J,"escape",n),t(J,"click",o),t(J,"loaderror",p),t(J,"loaderstart",q),t(J,"networkschange",s),t(J,"confirm",v),t(J,"cancel",w),t(J,"shippingaddresschange",x),t(J,"shippingratechange",z),t(J,"savedpaymentmethodremove",A),t(J,"savedpaymentmethodupdate",B),t(J,"change",m),l&&(e="expressCheckout"===a?l:function(){l(J)}),t(J,"ready",e),d.default.useLayoutEffect(function(){if(null===L.current&&null!==M.current&&(D||F)){var b=null;if(F)switch(a){case"payment":b=F.createPaymentElement(i);break;case"address":if("mode"in i){var d=i.mode,e=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(i,I);if("shipping"===d)b=F.createShippingAddressElement(e);else if("billing"===d)b=F.createBillingAddressElement(e);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":b=F.createExpressCheckoutElement(i);break;case"currencySelector":b=F.createCurrencySelectorElement();break;case"taxId":b=F.createTaxIdElement(i);break;default:throw Error("Invalid Element type ".concat(c,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else D&&(b=D.create(a,i));L.current=b,K(b),b&&b.mount(M.current)}},[D,F,i]);var N=u(i);return d.default.useEffect(function(){if(L.current){var a=y(i,N,["paymentRequest"]);a&&"update"in L.current&&L.current.update(a)}},[i,N]),d.default.useLayoutEffect(function(){return function(){if(L.current&&"function"==typeof L.current.destroy)try{L.current.destroy(),L.current=null}catch(a){}}},[]),d.default.createElement("div",{id:f,className:g,ref:M})};return e.propTypes={id:m.default.string,className:m.default.string,onChange:m.default.func,onBlur:m.default.func,onFocus:m.default.func,onReady:m.default.func,onEscape:m.default.func,onClick:m.default.func,onLoadError:m.default.func,onLoaderStart:m.default.func,onNetworksChange:m.default.func,onConfirm:m.default.func,onCancel:m.default.func,onShippingAddressChange:m.default.func,onShippingRateChange:m.default.func,onSavedPaymentMethodRemove:m.default.func,onSavedPaymentMethodUpdate:m.default.func,options:m.default.object},e.displayName=c,e.__elementType=a,e},K=d.default.createContext(null);K.displayName="EmbeddedCheckoutProviderContext";J("auBankAccount",!0);var L=J("card",!0);J("cardNumber",!0),J("cardExpiry",!0),J("cardCvc",!0),J("iban",!0),J("payment",!0),J("expressCheckout",!0),J("paymentRequestButton",!0),J("linkAuthentication",!0),J("address",!0),J("shippingAddress",!0),J("paymentMethodMessaging",!0),J("taxId",!0);var M=a.i(57158),N=a.i(95736);let O=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];k=!0;var d=Date.now();return l().then(function(a){return j(a,b,d)})}("pk_test_51Ryr17RfwLd4KHPypeHQR5Uf4kfQkP3BfftOLb7ZPYRLBNirDPu1rFxNSqmCYeO6YHoDxsUhV5wTPZ1QATifmxr500j0NcCjri");function P(){var a;let b=H("calls useStripe()").stripe,f=(a="calls useElements()",E(d.default.useContext(D),a)).elements,g=(0,e.useRouter)(),[h,i]=(0,d.useState)(!1),[j,k]=(0,d.useState)(""),[l,m]=(0,d.useState)({street:"",city:"",state:"",zipCode:"",country:"USA"}),n=async a=>{if(a.preventDefault(),k(""),h)return;if(i(!0),!b||!f)return void i(!1);let c=null;try{let{clientSecret:a,order:d}=(await M.default.post("/orders",{shippingAddress:l})).data;if(c=d._id,!a)throw Error("Payment processing not available. Please try again.");let{error:e,paymentIntent:h}=await b.confirmCardPayment(a,{payment_method:{card:f.getElement(L)}});if(e){let a=e.message||"Payment failed";if((a.includes("test mode")||a.includes("non test card"))&&(a="âš ï¸ Test Mode: Use test card 4242 4242 4242 4242. Real cards won't work in test mode."),c)try{await M.default.delete(`/orders/${c}`)}catch(a){console.error("Failed to cancel order:",a)}k(a),i(!1);return}if(h?.status==="succeeded")await M.default.post(`/orders/${c}/confirm-payment`,{paymentIntentId:h.id}),g.push(`/orders/${c}`);else{if(c)try{await M.default.delete(`/orders/${c}`)}catch(a){console.error("Failed to cancel order:",a)}k("Payment was not completed. Please try again."),i(!1)}}catch(a){if(c)try{await M.default.delete(`/orders/${c}`)}catch(a){console.error("Failed to cancel order:",a)}k(a.response?.data?.message||"Checkout failed. Please try again."),i(!1)}};return(0,c.jsxs)("form",{onSubmit:n,className:"space-y-6",children:[(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Shipping Address"}),(0,c.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"Street"}),(0,c.jsx)("input",{type:"text",required:!0,value:l.street,onChange:a=>m({...l,street:a.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"City"}),(0,c.jsx)("input",{type:"text",required:!0,value:l.city,onChange:a=>m({...l,city:a.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"State"}),(0,c.jsx)("input",{type:"text",required:!0,value:l.state,onChange:a=>m({...l,state:a.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-gray-700 mb-2",children:"Zip Code"}),(0,c.jsx)("input",{type:"text",required:!0,value:l.zipCode,onChange:a=>m({...l,zipCode:a.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]})]})]}),(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Payment"}),(0,c.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[(0,c.jsx)("p",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"ðŸ§ª Test Mode Active"}),(0,c.jsx)("p",{className:"text-xs text-yellow-700 mb-3",children:"Use Stripe test cards. Real cards won't work in test mode."}),(0,c.jsxs)("div",{className:"text-xs text-yellow-700 space-y-1",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Success:"})," 4242 4242 4242 4242"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Decline:"})," 4000 0000 0000 0002"]}),(0,c.jsx)("p",{children:"Use any future expiry date, any CVC, and any ZIP code"})]})]}),(0,c.jsx)("div",{className:"border p-4 rounded-lg",children:(0,c.jsx)(L,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}}}}})})]}),j&&(0,c.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:[(0,c.jsxs)("p",{className:"font-semibold mb-2",children:["âŒ ",j]}),j.includes("test mode")&&(0,c.jsxs)("div",{className:"mt-2 text-sm bg-white p-3 rounded border border-red-200",children:[(0,c.jsx)("p",{className:"font-semibold mb-1",children:"Use this test card:"}),(0,c.jsx)("p",{className:"font-mono text-lg",children:"4242 4242 4242 4242"}),(0,c.jsx)("p",{className:"text-xs mt-2",children:"Any future expiry date (e.g., 12/25), any CVC (e.g., 123), any ZIP"})]})]}),(0,c.jsx)("button",{type:"submit",disabled:!b||h,className:"w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 disabled:opacity-50",children:h?"Processing...":"Complete Order"})]})}function Q(){let{isAuthenticated:a}=(0,f.useAuth)(),b=(0,e.useRouter)(),[g,h]=(0,d.useState)(null);(0,d.useEffect)(()=>{a?i():b.push("/login")},[a]);let i=async()=>{try{let a=await M.default.get("/cart");a.data.success&&(h(a.data.cart),0===a.data.cart.items.length&&b.push("/cart"))}catch(a){console.error("Error fetching cart:",a)}};return g?(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,c.jsx)(N.default,{}),(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,c.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Checkout"}),(0,c.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,c.jsx)("div",{children:(0,c.jsx)(F,{stripe:O,children:(0,c.jsx)(P,{})})}),(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-fit",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Order Summary"}),(0,c.jsx)("div",{className:"space-y-2 mb-4",children:g.items.map(a=>(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsxs)("span",{children:[a.product.name," x",a.quantity]}),(0,c.jsxs)("span",{children:["$",(a.product.price*a.quantity).toFixed(2)]})]},a._id))}),(0,c.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"Subtotal:"}),(0,c.jsxs)("span",{children:["$",g.total.toFixed(2)]})]}),(0,c.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,c.jsx)("span",{children:"Total:"}),(0,c.jsxs)("span",{children:["$",g.total.toFixed(2)]})]})]})]})]})]})]}):(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,c.jsx)(N.default,{}),(0,c.jsx)("div",{className:"container mx-auto px-4 py-20 text-center",children:"Loading..."})]})}a.s(["default",()=>Q],20872)}];

//# sourceMappingURL=g_ecommerce-platform_frontend_af854c0d._.js.map