{"version":3,"sources":["turbopack:///[project]/g/ecommerce-platform/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/g/ecommerce-platform/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","turbopack:///[project]/g/ecommerce-platform/frontend/app/products/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport api from '@/lib/api';\r\nimport { Product } from '@/lib/types';\r\nimport Link from 'next/link';\r\nimport { ShoppingCart } from 'lucide-react';\r\nimport Navigation from '@/components/Navigation';\r\n\r\nexport default function ProductsPage() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [search, selectedCategory]);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const params: any = { status: 'active' };\r\n      if (search) params.search = search;\r\n      if (selectedCategory) params.category = selectedCategory;\r\n\r\n      const response = await api.get('/products', { params });\r\n      if (response.data.success) {\r\n        setProducts(response.data.products);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching products:', error);\r\n      if (error.code === 'ERR_NETWORK' || error.message === 'Network Error') {\r\n        console.error('üí° Tip: Make sure your backend server is running on http://localhost:5000');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addToCart = async (productId: string) => {\r\n    try {\r\n      // Check if user is logged in\r\n      const token = sessionStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Please log in to add items to cart');\r\n        window.location.href = '/login';\r\n        return;\r\n      }\r\n\r\n      await api.post('/cart', {\r\n        productId,\r\n        quantity: 1,\r\n      });\r\n      alert('‚úÖ Added to cart!');\r\n    } catch (error: any) {\r\n      if (error.response?.status === 401) {\r\n        alert('Please log in to add items to cart');\r\n        window.location.href = '/login';\r\n      } else {\r\n        alert(error.response?.data?.message || 'Failed to add to cart');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Helper to check if product is in stock\r\n  const isInStock = (product: Product) => {\r\n    if (product.inStock !== undefined) return product.inStock;\r\n    // Fallback: check inventory quantity directly\r\n    return product.inventory.quantity > 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <Navigation />\r\n      \r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <h1 className=\"text-4xl font-bold mb-8\">Products</h1>\r\n\r\n        {/* Search */}\r\n        <div className=\"mb-6\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search products...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-full md:w-1/3 px-4 py-2 border rounded-lg\"\r\n          />\r\n        </div>\r\n\r\n        {/* Products Grid */}\r\n        {loading ? (\r\n          <div className=\"text-center py-20\">Loading products...</div>\r\n        ) : products.length === 0 ? (\r\n          <div className=\"text-center py-20 text-gray-500\">No products found</div>\r\n        ) : (\r\n          <div className=\"grid md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n            {products.map((product) => (\r\n              <div key={product._id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition\">\r\n                <Link href={`/products/${product._id}`}>\r\n                  <img\r\n                    src={product.images[0] || '/placeholder.jpg'}\r\n                    alt={product.name}\r\n                    className=\"w-full h-48 object-cover\"\r\n                  />\r\n                </Link>\r\n                <div className=\"p-4\">\r\n                  <Link href={`/products/${product._id}`}>\r\n                    <h3 className=\"font-semibold text-lg mb-2 hover:text-purple-600\">\r\n                      {product.name}\r\n                    </h3>\r\n                  </Link>\r\n                  <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">{product.description}</p>\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <div>\r\n                      <span className=\"text-2xl font-bold text-purple-600\">${product.price}</span>\r\n                      {product.compareAtPrice && (\r\n                        <span className=\"text-gray-400 line-through ml-2\">${product.compareAtPrice}</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => addToCart(product._id)}\r\n                    className={`w-full py-2 rounded-lg flex items-center justify-center gap-2 font-semibold transition-colors ${\r\n                      isInStock(product)\r\n                        ? 'bg-purple-600 text-white hover:bg-purple-700'\r\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                    }`}\r\n                    disabled={!isInStock(product)}\r\n                  >\r\n                    <ShoppingCart className=\"w-4 h-4\" />\r\n                    {isInStock(product) ? 'Add to Cart' : 'Out of Stock'}\r\n                  </button>\r\n                  {isInStock(product) && product.inventory.quantity <= product.inventory.lowStockThreshold && (\r\n                    <p className=\"text-xs text-orange-600 mt-1 text-center\">‚ö†Ô∏è Low Stock - Only {product.inventory.quantity} left!</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEE,6BAA6B,wCCAtD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAChD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC/B,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAEzD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAQ,EAAiB,EAE7B,IAAM,EAAgB,UACpB,GAAI,CACF,IAAM,EAAc,CAAE,OAAQ,QAAS,EACnC,GAAQ,GAAO,MAAM,CAAG,CAAA,EACxB,IAAkB,EAAO,QAAQ,CAAG,CAAA,EAExC,IAAM,EAAW,MAAM,EAAA,OAAG,CAAC,GAAG,CAAC,YAAa,CAAE,QAAO,EACjD,GAAS,IAAI,CAAC,OAAO,EAAE,AACzB,EAAY,EAAS,IAAI,CAAC,QAAQ,CAEtC,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,2BAA4B,IACtC,AAAe,kBAAT,IAAI,EAAwC,kBAAlB,EAAM,OAAO,AAAK,GAAiB,AACrE,QAAQ,KAAK,CAAC,4EAElB,QAAU,CACR,GAAW,EACb,CACF,EAEM,EAAY,MAAO,IACvB,GAAI,CAGF,GAAI,CAAC,AADS,eAAe,OAAO,CAAC,SACzB,CACV,MAAM,sCACN,OAAO,QAAQ,CAAC,IAAI,CAAG,SACvB,MACF,CAEA,MAAM,EAAA,OAAG,CAAC,IAAI,CAAC,QAAS,WACtB,EACA,SAAU,CACZ,GACA,MAAM,mBACR,CAAE,MAAO,EAAY,CACf,EAAM,QAAQ,EAAE,SAAW,KAAK,AAClC,MAAM,sCACN,OAAO,QAAQ,CAAC,IAAI,CAAG,UAEvB,MAAM,EAAM,QAAQ,EAAE,MAAM,SAAW,wBAE3C,CACF,EAGM,EAAY,AAAC,GACjB,KAAwB,IAApB,EAAQ,KAAuB,EAAhB,CAAuB,EAAQ,OAAO,CAElD,EAAQ,SAAS,CAAC,QAAQ,CAAG,EAGtC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAA,GAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,aAGxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,qBACZ,MAAO,EACP,SAAW,AAAD,GAAO,EAAU,EAAE,MAAM,CAAC,KAAK,EACzC,UAAU,kDAKb,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAoB,wBACb,IAApB,EAAS,MAAM,CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CAAkC,sBAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACZ,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAsB,UAAU,qFAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,UAAU,EAAE,EAAQ,GAAG,CAAA,CAAE,UACpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAQ,MAAM,CAAC,EAAE,EAAI,mBAC1B,IAAK,EAAQ,IAAI,CACjB,UAAU,+BAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,UAAU,EAAE,EAAQ,GAAG,CAAA,CAAE,UACpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DACX,EAAQ,IAAI,KAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDAA2C,EAAQ,WAAW,GAC3E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,+CAAqC,IAAE,EAAQ,KAAK,IACnE,EAAQ,cAAc,EACrB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,4CAAkC,IAAE,EAAQ,cAAc,SAIhF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAU,EAAQ,GAAG,EACpC,UAAW,CAAC,8FAA8F,EACxG,EAAU,GACN,+CACA,+CAAA,CACJ,CACF,SAAU,CAAC,EAAU,aAErB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,YACvB,EAAU,GAAW,cAAgB,kBAEvC,EAAU,IAAY,EAAQ,SAAS,CAAC,QAAQ,EAAI,EAAQ,SAAS,CAAC,iBAAiB,EACtF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDAA2C,uBAAqB,EAAQ,SAAS,CAAC,QAAQ,CAAC,iBApCpG,EAAQ,GAAG,UA8CnC","ignoreList":[0,1]}